(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-396cd8d6"],{"38a0":function(o,e,t){"use strict";t.r(e);var n=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"cros-coupon-container"},[t("div",{staticClass:"form-group clearfix"},[t("label",{staticClass:"form-control-static cros-label cros-float-left"},[o._v(" "+o._s(o.$t("product.coupon.title"))+" ")]),t("div",{staticClass:"cros-coupon cros-float-left"},[t("input",{directives:[{name:"model",rawName:"v-model",value:o.couponCode,expression:"couponCode"}],staticClass:"form-control",attrs:{id:"couponCodeInput",name:"couponCode",type:"text",placeholder:o.$t("product.coupon.placeholder")},domProps:{value:o.couponCode},on:{blur:o.checkCoupon,input:function(e){e.target.composing||(o.couponCode=e.target.value)}}})]),o.couponIsFetching?t("div",{staticClass:"cros-float-left product-coupon-loader"},[t("ClipLoader",{attrs:{loading:!0,color:"#0066FF",size:"16px"}})],1):o._e(),t("div",{staticClass:"cros-float-left",domProps:{innerHTML:o._s(o.couponMessage)}})]),t("input",{attrs:{type:"hidden",name:"couponToken"},domProps:{value:o.couponToken}})])},r=[],s=t("1da1"),c=(t("96cf"),t("498a2"),t("a449")),u=t("da7a"),i={name:"VCoupon",components:{ClipLoader:u["a"]},data:function(){return{couponCode:null,couponRuntime:0,couponTokenTimer:null}},computed:{couponIsFetching:function(){return this.$store.state.setting.coupon.isFetching},couponResponse:function(){return this.$store.state.setting.coupon.data},couponToken:function(){return this.couponResponse?this.couponResponse.couponToken:null},couponMessage:function(){var o="";if(this.couponResponse)if(this.couponResponse.errorCode){var e=this.couponResponse.errorCode,t=e===c["a"].ProductCodeEmpty?"product.coupon.emptyProduct":"product.coupon.invalid";o=this.$t(t)}else this.couponResponse.couponToken&&(o=this.$t("product.coupon.valid"));return o}},methods:{checkCoupon:function(){var o=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=o.couponCode.trim(),o.couponCode=t,o.$store.commit("inputForm/update",{name:"couponCode",value:t}),t&&0!==t.length){e.next=6;break}return o.$store.commit("setting/COUPON_UPDATE",null),e.abrupt("return");case 6:return o.checkCouponDataFromSessionStorage(t),e.next=9,o.$store.dispatch("setting/checkCoupon");case 9:n=e.sent,n.couponToken?(o.$sessionStorage.set("couponCode",n.couponCode),o.$sessionStorage.set("couponToken",n.couponToken),o.couponTokenTimerRegister()):o.couponCode="";case 11:case"end":return e.stop()}}),e)})))()},checkCouponDataFromSessionStorage:function(o){var e=this.$sessionStorage.get("couponCode"),t=this.$sessionStorage.get("couponToken");o===e&&t&&this.$store.commit("setting/COUPON_UPDATE",{couponCode:o,couponToken:t})},couponTokenTimerRegister:function(){var o=this;this.couponRuntime=0,clearInterval(this.couponTokenTimer),this.couponTokenTimer=setInterval((function(){o.couponRuntime+=1,o.couponRuntime>=280&&(o.checkCoupon(o.couponCode,o.couponToken),o.couponRuntime=0)}),1e3)}}},a=i,p=(t("66a6"),t("2877")),l=Object(p["a"])(a,n,r,!1,null,null,null);e["default"]=l.exports},"498a2":function(o,e,t){"use strict";var n=t("23e7"),r=t("58a8").trim,s=t("c8d2");n({target:"String",proto:!0,forced:s("trim")},{trim:function(){return r(this)}})},"66a6":function(o,e,t){"use strict";t("a929")},a106:function(o,e,t){},a929:function(o,e,t){},c337:function(o,e,t){"use strict";t("a106")},c8d2:function(o,e,t){var n=t("d039"),r=t("5899"),s="​᠎";o.exports=function(o){return n((function(){return!!r[o]()||s[o]()!=s||r[o].name!==o}))}},da7a:function(o,e,t){"use strict";var n=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{directives:[{name:"show",rawName:"v-show",value:o.loading,expression:"loading"}],staticClass:"v-spinner"},[t("div",{staticClass:"v-clip",style:o.spinnerStyle})])},r=[],s={name:"ClipLoader",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"#5dc596"},size:{type:String,default:"35px"},radius:{type:String,default:"100%"}},computed:{spinnerStyle:function(){return{height:this.size,width:this.size,borderWidth:"2px",borderStyle:"solid",borderColor:this.color+" "+this.color+" transparent",borderRadius:this.radius,background:"transparent"}}}},c=s,u=(t("c337"),t("2877")),i=Object(u["a"])(c,n,r,!1,null,null,null);e["a"]=i.exports}}]);